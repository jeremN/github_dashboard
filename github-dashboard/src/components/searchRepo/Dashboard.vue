<template>
	<div class="board">
		<div class="card card-menu">
			<div class="card-heading">
				<h2>Hello</h2>
				<p class="min">Please use the search bar to find user's</p>
				<svg version="1.1" id="e0c1ea27-b4e7-4ca1-b144-c0c936b4df46" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 840 726.8" enable-background="new 0 0 840 726.8" xml:space="preserve">
					<title>Illustration: Taken</title>
					<g opacity="0.8">
							<linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="432" y1="482.23" x2="432" y2="709.15" gradientTransform="matrix(1 0 0 -1 0 728)">
							<stop  offset="0" style="stop-color:#808080;stop-opacity:0.25"/>
							<stop  offset="0.54" style="stop-color:#808080;stop-opacity:0.12"/>
							<stop  offset="1" style="stop-color:#808080;stop-opacity:0.1"/>
						</linearGradient>
						<ellipse fill="url(#SVGID_1_)" cx="432" cy="132.3" rx="146.5" ry="113.5"/>
					</g>
					<ellipse fill="#6C63FF" cx="432" cy="132.3" rx="143.2" ry="110.9"/>
					<path opacity="0.1" fill="#FFFFFF" enable-background="new    " d="M311.9,144.6c0-61.3,64.1-110.9,143.2-110.9c24.6-0.1,48.9,4.9,71.3,14.7c-25.2-17-58.1-27.3-94.1-27.3c-79.1,0-143.2,49.7-143.2,110.9c0,41.1,28.9,77.1,71.8,96.2C330.9,207.9,311.9,178,311.9,144.6z"/>
					<polygon opacity="0.2" fill="#6C63FF" enable-background="new    " points="432,176.9 590.8,451.9 749.5,726.8 432,726.8 114.5,726.8 273.2,451.9 "/>
					<g opacity="0.3">
						<linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="632.6744" y1="-961.1736" x2="632.6744" y2="-775.7111" gradientTransform="matrix(0.9478 0.319 0.319 -0.9478 98.4988 -483.755)">
							<stop  offset="0" style="stop-color:#808080;stop-opacity:0.25"/>
							<stop  offset="0.54" style="stop-color:#808080;stop-opacity:0.12"/>
							<stop  offset="1" style="stop-color:#808080;stop-opacity:0.1"/>
						</linearGradient>
						<path fill="url(#SVGID_2_)" d="M469.7,566.2l12.3-36.6c8.7-26.2-0.7-54.9-23.2-70.9l0.1-0.1c-4.9-3.4-10.2-6.1-15.8-8l0,0l-0.2,0l-0.2-0.1l0,0c-5.5-1.8-11.1-2.9-16.9-3.2c-2-0.1-4.1-0.1-6.1,0c-3.5,0.2-7,0.7-10.5,1.5c-1,0.2-2,0.5-2.9,0.7s-1.9,0.6-2.9,0.9c-1.9,0.6-3.8,1.3-5.6,2.2c-0.9,0.4-1.8,0.8-2.7,1.3c-2.7,1.3-5.3,2.9-7.8,4.6c-0.8,0.6-1.6,1.2-2.4,1.8c-9.9,7.5-17.3,17.8-21.2,29.6l-19.4,57.5c-3.1,9-4,18.7-2.7,28.1c0.2,1.5,0.4,2.9,0.7,4.3c0.3,1.4,0.6,2.8,1,4.2c0.3,0.9,0.5,1.9,0.8,2.8c0.5,1.4,1,2.7,1.5,4.1c0.4,0.9,0.8,1.8,1.2,2.7c0.8,1.8,1.7,3.5,2.7,5.1c1,1.7,2,3.3,3.2,4.9c0.8,1.2,1.7,2.3,2.7,3.5c1.2,1.5,2.5,2.9,3.9,4.3c6,6,13.1,10.7,21,13.9l0,0l0,0l0.3,0.1c0.4-0.8,0.9-1.5,1.4-2.2c3-4.1,8.2-7,13.2-5.9c0.4,0.1,0.7,0.2,1.1,0.3c2.5,0.9,5,2.5,7.4,3.3c1.8,0.8,3.8,0.8,5.6-0.1c4.8-2.6,3-10.8,7.2-14.3c0.2-0.2,0.4-0.3,0.6-0.5l-0.2-0.2c3.2-2,7.7-0.7,11.4,0.6c4,1.4,9.2,2.3,12-0.9c1.9-2.2,1.8-5.7,3.5-8c2.1-2.7,6-3,9.4-2.5c1.8,0.3,12.8,13,21.4,8.8C461,592,468.6,569.4,469.7,566.2z"/>
					</g>
					<path fill="#FFFFFF" d="M383.2,620.2c2.9-4,7.9-6.8,12.7-5.7s9.3,5.7,13.6,3.4c4.7-2.5,3-10.4,7-13.8c3.1-2.7,7.9-1.3,11.8,0s8.9,2.3,11.5-0.9c1.8-2.2,1.7-5.5,3.4-7.7c2-2.6,5.8-2.9,9.1-2.4c1.7,0.3,12.4,12.6,20.6,8.5c-13.3-11.4-6-33.1-5-36.2l11.9-35.3c10.5-31.5-6.4-65.6-37.9-76.3l0,0c-31.5-10.5-65.6,6.4-76.3,37.9L347,547.2c-10.1,30.3,5.2,63.3,34.8,75.2C382.2,621.6,382.7,620.9,383.2,620.2z"/>
					<circle opacity="0.2" enable-background="new    " cx="405.4" cy="486.1" r="6.5"/>
					<circle opacity="0.2" enable-background="new    " cx="442.4" cy="498.6" r="6.5"/>
					<ellipse transform="matrix(-0.9478 -0.319 0.319 -0.9478 644.5391 1139.6425)" fill="#E0E0E0" cx="415.6" cy="517" rx="6.5" ry="9.8"/>
					<circle fill="#FFFFFF" cx="552.6" cy="487.6" r="9.8"/>
					<circle fill="#FFFFFF" cx="583.5" cy="472.2" r="4.9"/>
					<g opacity="0.8">
						<linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="432" y1="459.44" x2="432" y2="478.97" gradientTransform="matrix(1 0 0 -1 0 728)">
							<stop  offset="0" style="stop-color:#808080;stop-opacity:0.25"/>
							<stop  offset="0.54" style="stop-color:#808080;stop-opacity:0.12"/>
							<stop  offset="1" style="stop-color:#808080;stop-opacity:0.1"/>
						</linearGradient>
						<rect x="334.4" y="249" fill="url(#SVGID_3_)" width="195.3" height="19.5"/>
					</g>
					<rect x="334.4" y="245.8" fill="#E0E0E0" width="195.3" height="19.5"/>
					<path opacity="0.1" enable-background="new    " d="M569.5,99.4c1.9,7.2,2.8,14.5,2.8,21.9c0,61.3-64.1,110.9-143.2,110.9c-64.7,0-119.4-33.2-137.1-78.9c13.1,50.8,71,89,140.4,89c79.1,0,143.2-49.7,143.2-110.9C575.6,120.5,573.5,109.6,569.5,99.4z"/>
					<g opacity="0.8">
						<linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="432" y1="469.91" x2="432" y2="624.73" gradientTransform="matrix(1 0 0 -1 0 728)">
							<stop  offset="0" style="stop-color:#808080;stop-opacity:0.25"/>
							<stop  offset="0.54" style="stop-color:#808080;stop-opacity:0.12"/>
							<stop  offset="1" style="stop-color:#808080;stop-opacity:0.1"/>
						</linearGradient>
						<ellipse fill="url(#SVGID_4_)" cx="432" cy="180.7" rx="296.2" ry="77.4"/>
					</g>
					<path fill="#FFFFFF" d="M432,105.8c-158.2,0-286.4,33.5-286.4,74.9h572.8C718.4,139.3,590.2,105.8,432,105.8z"/>
					<path fill="#FFFFFF" d="M432,255.5c158.2,0,286.4-33.5,286.4-74.9H145.6C145.6,222,273.8,255.5,432,255.5z"/>
					<path opacity="5.000000e-002" enable-background="new    " d="M432,255.5c158.2,0,286.4-33.5,286.4-74.9H145.6
						C145.6,222,273.8,255.5,432,255.5z"/>
					<path opacity="5.000000e-002" enable-background="new    " d="M312.5,161.1h239c9.5,0,17.2,7.7,17.2,17.2v4.6c0,9.5-7.7,17.2-17.2,17.2h-239c-9.5,0-17.2-7.7-17.2-17.2v-4.6C295.3,168.9,303,161.1,312.5,161.1z"/>
					<path opacity="0.5" fill="#4D8AF0" enable-background="new    " d="M133.9,57.8c-1.7-0.8-2.6-2.7-2-4.4c0-0.1,0.1-0.3,0.1-0.4l0,0c0.1-1-0.7-1.9-1.7-2c-0.6,0-1.2,0.2-1.6,0.7l0,0c-0.1,0.1-0.1,0.2-0.2,0.4c-0.8,1.7-2.7,2.6-4.4,2c-0.1,0-0.3-0.1-0.4-0.1l0,0c-1-0.1-1.9,0.7-2,1.7c0,0.6,0.2,1.2,0.7,1.6l0,0c0.1,0.1,0.2,0.1,0.4,0.2c1.7,0.8,2.6,2.7,2,4.4c0,0.1-0.1,0.3-0.1,0.4l0,0c-0.1,1,0.7,1.9,1.7,2c0.6,0,1.2-0.2,1.6-0.7l0,0c0.1-0.1,0.1-0.2,0.2-0.4c0.8-1.7,2.7-2.6,4.4-2c0.1,0,0.3,0.1,0.4,0.1l0,0c1,0.1,1.9-0.7,2-1.7c0-0.6-0.2-1.2-0.7-1.6l0,0C134.1,57.9,134,57.9,133.9,57.8z"/>
					<path opacity="0.5" fill="#4D8AF0" enable-background="new    " d="M642.9,363.8c-1.7-0.8-2.6-2.7-2-4.4c0-0.1,0.1-0.3,0.1-0.4l0,0c0.1-1-0.7-1.9-1.7-2c-0.6,0-1.2,0.2-1.6,0.7l0,0c-0.1,0.1-0.1,0.2-0.2,0.4c-0.8,1.7-2.7,2.6-4.4,2c-0.1,0-0.3-0.1-0.4-0.1l0,0c-1-0.1-1.9,0.7-2,1.7c0,0.6,0.2,1.2,0.7,1.6l0,0c0.1,0.1,0.2,0.1,0.4,0.2c1.7,0.8,2.6,2.7,2,4.4c0,0.1-0.1,0.3-0.1,0.4l0,0c-0.1,1,0.7,1.9,1.7,2c0.6,0,1.2-0.2,1.6-0.7l0,0c0.1-0.1,0.1-0.2,0.2-0.4c0.8-1.7,2.7-2.6,4.4-2c0.1,0,0.3,0.1,0.4,0.1l0,0c1,0.1,1.9-0.7,2-1.7c0-0.6-0.2-1.2-0.7-1.6l0,0C643.1,363.9,643,363.9,642.9,363.8z"/>
					<path opacity="0.5" fill="#4D8AF0" enable-background="new    " d="M80.9,505.8c-1.7-0.8-2.6-2.7-2-4.4c0-0.1,0.1-0.3,0.1-0.4l0,0c0.1-1-0.7-1.9-1.7-2c-0.6,0-1.2,0.2-1.6,0.7l0,0c-0.1,0.1-0.1,0.2-0.2,0.4c-0.8,1.7-2.7,2.6-4.4,2c-0.1,0-0.3-0.1-0.4-0.1l0,0c-1-0.1-1.9,0.7-2,1.7c0,0.6,0.2,1.2,0.7,1.6l0,0c0.1,0.1,0.2,0.1,0.4,0.2c1.7,0.8,2.6,2.7,2,4.4c0,0.1-0.1,0.3-0.1,0.4l0,0c-0.1,1,0.7,1.9,1.7,2c0.6,0,1.2-0.2,1.6-0.7l0,0c0.1-0.1,0.1-0.2,0.2-0.4c0.8-1.7,2.7-2.6,4.4-2c0.1,0,0.3,0.1,0.4,0.1l0,0c1,0.1,1.9-0.7,2-1.7c0-0.6-0.2-1.2-0.7-1.6l0,0C81.1,505.9,81,505.9,80.9,505.8z"/>
					<path opacity="0.5" fill="#4D8AF0" enable-background="new    " d="M25.9,174.8c-1.7-0.8-2.6-2.7-2-4.4c0-0.1,0.1-0.3,0.1-0.4l0,0c0.1-1-0.7-1.9-1.7-2c-0.6,0-1.2,0.2-1.6,0.7l0,0c-0.1,0.1-0.1,0.2-0.2,0.4c-0.8,1.7-2.7,2.6-4.4,2c-0.1,0-0.3-0.1-0.4-0.1l0,0c-1-0.1-1.9,0.7-2,1.7c0,0.6,0.2,1.2,0.7,1.6l0,0c0.1,0.1,0.2,0.1,0.4,0.2c1.7,0.8,2.6,2.7,2,4.4c0,0.1-0.1,0.3-0.1,0.4l0,0c-0.1,1,0.7,1.9,1.7,2c0.6,0,1.2-0.2,1.6-0.7l0,0c0.1-0.1,0.1-0.2,0.2-0.4c0.8-1.7,2.7-2.6,4.4-2c0.1,0,0.3,0.1,0.4,0.1l0,0c1,0.1,1.9-0.7,2-1.7c0-0.6-0.2-1.2-0.7-1.6l0,0C26.1,174.9,26,174.9,25.9,174.8z"/>
					<path opacity="0.5" fill="#4D8AF0" enable-background="new    " d="M632.9,6.8c-1.7-0.8-2.6-2.7-2-4.4c0-0.1,0.1-0.3,0.1-0.4l0,0c0.1-1-0.7-1.9-1.7-2c-0.6,0-1.2,0.2-1.6,0.7l0,0c-0.1,0.1-0.1,0.2-0.2,0.4c-0.8,1.7-2.7,2.6-4.4,2c-0.1,0-0.3-0.1-0.4-0.1l0,0c-1-0.2-2,0.4-2.2,1.4c-0.2,0.8,0.2,1.6,0.9,2l0,0c0.1,0.1,0.2,0.1,0.4,0.2c1.7,0.8,2.6,2.7,2,4.4c0,0.1-0.1,0.3-0.1,0.4l0,0c-0.1,1,0.6,1.9,1.6,2c0.7,0.1,1.4-0.3,1.7-0.8l0,0c0.1-0.1,0.1-0.2,0.2-0.4c0.8-1.7,2.7-2.6,4.4-2c0.1,0,0.3,0.1,0.4,0.1l0,0c1,0.1,1.9-0.7,2-1.7c0-0.6-0.2-1.2-0.7-1.6l0,0C633.2,7,633,6.9,632.9,6.8z"/>
					<g opacity="0.5">
						<rect x="110" y="257.8" fill="#47E6B1" width="3" height="17"/>
						<rect x="103" y="264.8" fill="#47E6B1" width="17" height="3"/>
					</g>
					<g opacity="0.5">
						<rect x="830" y="177.8" fill="#47E6B1" width="3" height="17"/>
						<rect x="823" y="184.8" fill="#47E6B1" width="17" height="3"/>
					</g>
					<g opacity="0.5">
						<rect x="730" y="456.8" fill="#47E6B1" width="3" height="17"/>
						<rect x="723" y="463.8" fill="#47E6B1" width="17" height="3"/>
					</g>
					<circle opacity="0.5" fill="#F55F44" enable-background="new    " cx="723" cy="81.8" r="6"/>
					<circle opacity="0.5" fill="#F55F44" enable-background="new    " cx="6" cy="12.8" r="6"/>
					<circle opacity="0.5" fill="#F55F44" enable-background="new    " cx="186" cy="357.8" r="6"/>
				</svg>
			</div>
			<div v-if="isAuth" class="card-body">
				<button 
					v-if="isAuth"
					@click="addRepo = true"
					class="card-fragment">
					Create a repository 
				</button>
				<button
					v-if="datas.activeRepo != null && isAuth" 
					@click="addIssue = true" 
					class="card-fragment">
					Create a new issue
				</button>
			</div>
		</div>
		<app-barchart v-if="datas.languages" :datas="datas.languages"></app-barchart>
		<div class="card card-fragmented">
			<div class="card-heading">
				<h2>Details</h2>
			</div>
			<div class="card-body">
    			<div class="card-fragment">
    				<i class="fas fa-code-branch"></i>
    				<p><span class="color-blue">{{ datas.forks != null ? datas.forks : 0 }}</span>Forks</p>
    			</div>
    			<div class="card-fragment">
    				<i class="fas fa-tags"></i>
    				<p><span class="color-blue">{{ datas.tags != null ? datas.tags.length : 0 }}</span>Tags</p>
    			</div>
    			<div class="card-fragment">
    				<i class="fas fa-exclamation-circle"></i>
    				<p><span class="color-blue">{{ datas.issues != null ? datas.issues : 0}}</span>Issues</p>
    			</div>
    			<div class="card-fragment">
    				<i class="fas fa-user-edit"></i>
    				<p><span class="color-blue">{{ datas.contribs != null ? datas.contribs.length : 0 }}</span>Contributors</p>
    			</div>
			</div>
		</div>
		<div class="card card-list">
			<div class="card-heading">
				<h2>Top 3 contributors</h2>
			</div>
			<ul class="card-body card-list-group">
				<app-contributors v-for="contrib, index in datas.contribs" :contrib="contrib" :key="contrib.id"></app-contributors>
			</ul>
		</div>
		<app-issueform v-show="addIssue" @close-modal-issue="addIssue = $event"></app-issueform>
		<app-repoform v-show="addRepo" @close-modal-repo="addRepo = $event"></app-repoform>

	</div>
</template>

<script>
	import {mapGetters} from 'vuex'
	import Barchart from './charts/Bars.vue'
	import Contributors from './dashboard/Ranklist.vue'
	import Issueform from './dashboard/CreateIssueForm.vue'
	import Repoform from './dashboard/CreateRepoForm.vue'

	export default {
		data() {
			return {
				addIssue: false,
				addRepo: false
			}
		},
		computed: {
			...mapGetters({
				datas: 'initState',
				isAuth: 'isAuthenticated'
			}),
		},
		components: {
			appBarchart: Barchart,
			appContributors: Contributors,
			appIssueform: Issueform,
			appRepoform: Repoform	

		}
	}
</script>

<style lang="scss">
	.board {
		grid-column-start: 3;
		grid-column-end: 5;
		grid-row-start: 3;
		display: grid;
		grid-template-columns: 1fr 20px 1fr;
		grid-template-rows: auto 40px auto;
	}
	.card {
		display: flex;
		flex-direction: column;

		&-menu,
		&-chart,
		&-fragment,
		&-list-item {
			background-color: #fff;
			border-radius: 4px;
			box-shadow: 0 4px 24px -1px rgba(0,0,0,0.1);
		}

		&-heading {
			padding: 10px 15px;
			font-size: 1.5rem;
		}

		&-menu {
			grid-column-start: 1; 
			grid-column-end: 2;
			grid-row-start: 1;

			.card-heading {
				height: calc(100% - 125px);
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;

				.min {
					font-size: 12px;
					color: #c9d4d7;
					margin: 1.5em auto;
				}

				svg {
					width: 100%;
					height: auto;
				}
			}

			.card-body {
				display: flex;
				border-top: 2px solid #f4f7f9;
			}

			button {
				background: none;
				border: none;
				cursor: pointer;
			}
		}
		&-chart {
			grid-column-start: 3; 
			grid-column-end: 3;
			grid-row-start: 1;

			h2 {
				font-size: 1rem;

				span {
					font-size: 1.5rem;
					font-weight: bold;
				}
			}
			.card-body {height: 100%}
		}

		&-menu,
		&-chart {height: 420px;}

		&-fragmented {
			grid-column-start: 1; 
			grid-column-end: 2;
			grid-row-start: 3;
			display: flex;

			.card-body{
				display: flex;
				flex-flow: row wrap;
				align-items: center;
				justify-content: space-between;
			}
		}
		&-fragment {
			display: flex;
			align-items: center;
			justify-content: center;
			flex-grow: 1;	
			height: 125px;
			width: 48%;
			margin-top: 1%;
			margin-bottom: 1%;

			&:nth-child(odd) {margin-right: 1%;}
			&:nth-child(even) {margin-left: 1%;}
			
			i {font-size: 2rem;}

			p {
				display: flex;
				flex-direction: column;
				justify-content: center;
				font-size: 14px;
				margin-left: 1em;
			}

			span {
				font-size: 2rem;
				margin-bottom: 0.25em;
			}

			.card-menu & {
				box-shadow: none;
				border-radius: 0;
				margin: 0;
				flex-grow: 1;
			}
			&:first-child {
				.card-menu &{border-right: 2px solid #f4f7f9;}
			}
		}
		&-list {
			grid-column-start: 3; 
			grid-column-end: 3;
			grid-row-start: 3;

			&-group {
				display: flex;
				flex-direction: column;
			}

			&-item {
				margin: 1%;
				height: 80px;
				display: flex;
				align-items: center;
				padding: 0 15px;

				& > * {flex-grow: 1;}

				img{
					max-width: 30px;
					height: 30px;
					margin: 0 0.5em;
					background: #ccc;
				}

				.card-pill {
					border-radius: 2em;
					background-color: #f0f6f7;
					color: #18bcc9;
					padding: 10px 15px;
					font-weight: bold;
					text-align: center;
				}

				p {
					flex-grow: 2;
					word-break: break-word;
				}

				.medal {
					max-width: 30px;
					height: 30px;
					border-radius: 50%;
					position: relative;
					display: flex;
					align-items: center;
					justify-content: center;
					margin-right: 0.5em;
					&:before {
						display: block;
						position: absolute;
						color: rgba(0,0,0,0.6);
						font-size: 12px;
						font-weight: bold;
					}
				}
				&:first-child .medal {
					background-color: #ffe497;

					&:before {content: '1st';}			
				}		
				&:nth-child(2) .medal {
					background-color: #c0cacf;
					
					&:before {content: '2nd';}		
				}		
				&:nth-child(3) .medal {
					background-color: #daaa89;
					
					&:before {content: '3rd';}
				}
			}		
		}
	}
	.modal {
		position: fixed;
		background-color: rgba(0,0,0,0.5);
		z-index: 9999;
		top: 0;
		left: 0;
	}
</style>